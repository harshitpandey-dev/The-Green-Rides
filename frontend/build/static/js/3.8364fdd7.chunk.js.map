{"version":3,"sources":["components/Profile/ProfileForm.module.css","components/Profile/UserProfile.module.css","components/Profile/ProfileForm.js","components/Profile/UserData.js","components/Profile/UserProfile.js","pages/ProfilePage.js"],"names":["module","exports","ProfileForm","props","history","useHistory","newPasswordRef","useRef","className","classes","form","onSubmit","event","preventDefault","newEnteredPassword","current","value","fetch","userid","method","body","JSON","stringify","password","headers","Authorization","token","then","res","replace","control","htmlFor","type","id","ref","action","UserData","useState","guard","setGuard","useEffect","user","role","cycle","cycleid","name","UserProfile","authCtx","useContext","AuthContext","showChange","setShowChange","branch","rollno","profile","localStorage","getItem","onClick","ProfilePage"],"mappings":"sHACAA,EAAOC,QAAU,CAAC,KAAO,0BAA0B,QAAU,6BAA6B,OAAS,8B,mBCAnGD,EAAOC,QAAU,CAAC,QAAU,6BAA6B,OAAS,8B,+FCyCnDC,EArCK,SAACC,GACnB,IAAMC,EAAUC,cACVC,EAAiBC,mBAsBvB,OACE,uBAAMC,UAAWC,IAAQC,KAAMC,SArBR,SAACC,GACxBA,EAAMC,iBAEN,IAAMC,EAAqBR,EAAeS,QAAQC,MAGlDC,MAAM,GAAD,OAFO,+CAEP,2BAA0Bd,EAAMe,QAAU,CAC7CC,OAAQ,QACRC,KAAMC,KAAKC,UAAU,CACnBC,SAAUT,IAEZU,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYtB,EAAMuB,SAElCC,MAAK,SAACC,GACPxB,EAAQyB,QAAQ,SAKlB,UACE,sBAAKrB,UAAWC,IAAQqB,QAAxB,UACE,uBAAOC,QAAQ,eAAf,0BACA,uBAAOC,KAAK,WAAWC,GAAG,eAAeC,IAAK5B,OAEhD,qBAAKE,UAAWC,IAAQ0B,OAAxB,SACE,2DCbOC,EArBE,SAACjC,GAChB,MAA0BkC,oBAAS,GAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACAC,qBAAU,WACgB,UAApBrC,EAAMsC,KAAKC,MAAwC,UAApBvC,EAAMsC,KAAKC,MAC5CH,GAAS,KACV,CAACpC,EAAMsC,KAAKC,OAEf,IAAMC,EAAQxC,EAAMsC,KAAKG,QAAUzC,EAAMsC,KAAKG,QAAU,sBACxD,OACE,gCACE,qBAAIpC,UAAU,WAAd,oBAAiCL,EAAMsC,KAAKI,SAC1CP,GACA,mCAGE,qBAAI9B,UAAU,WAAd,wBAAqCmC,W,iBCyBhCG,EApCK,WAClB,IAAMC,EAAUC,qBAAWC,KAC3B,EAAoCZ,oBAAS,GAA7C,mBAAOa,EAAP,KAAmBC,EAAnB,KAMMV,EAAO,CACXI,KAAME,EAAQF,KACdO,OAAQL,EAAQK,OAChBC,OAAQN,EAAQM,OAChBT,QAASG,EAAQH,QAAUG,EAAQH,QAAU,GAC7CF,KAAMK,EAAQL,MAEhB,OACE,0BAASlC,UAAWC,IAAQ6C,QAA5B,UACmB,WAAhBP,EAAQL,MAAqB,8CACb,SAAhBK,EAAQL,MAAmB,+CACX,SAAhBK,EAAQL,MAAmB,+CAC5B,cAAC,EAAD,CAAUD,KAAMA,IACfS,GACC,cAAC,EAAD,CACExB,MAAO6B,aAAaC,QAAQ,SAC5BtC,OAAQ6B,EAAQ7B,SAGpB,qBAAKV,UAAWC,IAAQ0B,OAAxB,SACE,wBAAQsB,QAzBY,WACpBP,GAAYC,GAAc,GACzBD,GAAYC,GAAc,IAuB3B,SACGD,EAAa,SAAW,0BC7BpBQ,UAJK,WAClB,OAAO,cAAC,EAAD","file":"static/js/3.8364fdd7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileForm_form__2xGgc\",\"control\":\"ProfileForm_control__2YUZH\",\"action\":\"ProfileForm_action__opJ_6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__gQOnH\",\"action\":\"UserProfile_action__8zxDu\"};","import { useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport classes from './ProfileForm.module.css';\n\nconst ProfileForm = (props) => {\n  const history = useHistory();\n  const newPasswordRef = useRef();\n\n  const submitionHandler = (event) => {\n    event.preventDefault();\n\n    const newEnteredPassword = newPasswordRef.current.value;\n    const url = 'https://pacific-fortress-54764.herokuapp.com';\n\n    fetch(`${url}/users/password/${props.userid}`, {\n      method: 'PATCH',\n      body: JSON.stringify({\n        password: newEnteredPassword,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + props.token,\n      },\n    }).then((res) => {\n      history.replace('/');\n    });\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitionHandler}>\n      <div className={classes.control}>\n        <label htmlFor=\"new-password\">New Password</label>\n        <input type=\"password\" id=\"new-password\" ref={newPasswordRef} />\n      </div>\n      <div className={classes.action}>\n        <button>Change Password</button>\n      </div>\n    </form>\n  );\n};\n\nexport default ProfileForm;\n","import { useEffect, useState } from 'react';\n\nconst UserData = (props) => {\n  const [guard, setGuard] = useState(false);\n  useEffect(() => {\n    if (props.user.role === 'guard' || props.user.role === 'admin')\n      setGuard(true);\n  }, [props.user.role]);\n\n  const cycle = props.user.cycleid ? props.user.cycleid : 'No Cycle Rented Yet';\n  return (\n    <div>\n      <h3 className=\"centered\">Name : {props.user.name}</h3>\n      {!guard && (\n        <>\n          {/* <h4 className=\"centered\">Roll No.: {props.user.rollno}</h4> */}\n          {/* <h4 className=\"centered\">Branch : {props.user.branch}</h4> */}\n          <h4 className=\"centered\">Cycle Id : {cycle}</h4>\n        </>\n      )}\n    </div>\n  );\n};\nexport default UserData;\n","import { useContext, useState } from 'react';\nimport AuthContext from '../../store/auth-context';\nimport ProfileForm from './ProfileForm';\nimport UserData from './UserData';\nimport classes from './UserProfile.module.css';\n\nconst UserProfile = () => {\n  const authCtx = useContext(AuthContext);\n  const [showChange, setShowChange] = useState(false);\n  const showChangeHandler = () => {\n    if (showChange) setShowChange(false);\n    if (!showChange) setShowChange(true);\n  };\n\n  const user = {\n    name: authCtx.name,\n    branch: authCtx.branch,\n    rollno: authCtx.rollno,\n    cycleid: authCtx.cycleid ? authCtx.cycleid : '',\n    role: authCtx.role,\n  };\n  return (\n    <section className={classes.profile}>\n      {authCtx.role == 'student' && <h1>User Profile</h1>}\n      {authCtx.role == 'guard' && <h1>Guard Profile</h1>}\n      {authCtx.role == 'admin' && <h1>Admin Profile</h1>}\n      <UserData user={user} />\n      {showChange && (\n        <ProfileForm\n          token={localStorage.getItem('token')}\n          userid={authCtx.userid}\n        />\n      )}\n      <div className={classes.action}>\n        <button onClick={showChangeHandler}>\n          {showChange ? 'Cancel' : 'Change Password'}\n        </button>\n      </div>\n    </section>\n  );\n};\n\nexport default UserProfile;\n","import UserProfile from '../components/Profile/UserProfile';\n\nconst ProfilePage = () => {\n  return <UserProfile />;\n};\n\nexport default ProfilePage;\n"],"sourceRoot":""}